<div class="page-wrapper bg-gra-03">
  <app-navbaradmin></app-navbaradmin>
  <div class="wrapper wrapper--w1100">
    <div class="card card-5">
      <div class="card-heading">
        <h2 class="title">Nuevo producto</h2>
      </div>
      <div class="card-body">
        <form class="form-group" #addProduct="ngForm" (submit)="saveProduct(addProduct)" novalidate>
          <div class="row">
            <div class="col-lg-7">
              <div class="col-md-10">
                <div class="input-group-desc">
                  <label for="">Nombre del producto</label>
                  <input class="input--style-5" type="text" name="name" #name="ngModel" [(ngModel)]="product.name"
                    type="text" required>
                </div><br>
                <div class="alert alert-danger" role="alert" *ngIf="name.touched && name.invalid">
                  El nombre es requerido.
                </div>
                <div class="input-group-desc">
                  <label for="">Descripción</label>
                  <input class="input--style-5" type="text" name="detail" #detail="ngModel" [(ngModel)]="product.detail"
                    type="text" required>
                </div><br>
                <div class="alert alert-danger" role="alert" *ngIf="detail.touched && detail.invalid">
                  Descripción es requerida.
                </div>
                <!--<div class="input-group-desc">
                  <label for="">Precio Público</label>
                  <input class="input--style-5" type="text" placeholder = "₡ 0.00" (keypress)="numberOnly($event)" name="publicPrice" #publicPrice="ngModel" [ngModel]="product.publicPrice | currency" (ngModelChange)="product.publicPrice=$event" type="text" required>
                </div>-->
                <div class="input-group-desc">
                  <label for="">Precio Público</label>
                  <input class="input--style-5" type="text" placeholder="₡ 0.00" name="pricePublic"
                    #pricePublic="ngModel" [(ngModel)]="product.pricePublic" type="text" required>
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="pricePublic.touched && pricePublic.invalid">
                  Precio al público requerido.
                </div>
                <div class="input-group-desc">
                  <label for="">Precio por Mayor</label>
                  <input class="input--style-5" type="text" placeholder="₡ 0.00" name="priceMajor" #priceMajor="ngModel"
                    [(ngModel)]="product.priceMajor" type="text" required>
                </div>

                <div class="alert alert-danger" role="alert" *ngIf="priceMajor.touched && priceMajor.invalid">
                  Precio al por mayor requerido.
                </div>
                <div class="input-group-desc">
                  <label for="">Precio Tu Boutique</label>
                  <input class="input--style-5" type="text" placeholder="₡ 0.00" name="priceTuB" #priceTuB="ngModel"
                    [(ngModel)]="product.priceTuB" type="text" required>
                </div>
                <div class="alert alert-danger" role="alert" *ngIf="priceTuB.touched && priceTuB.invalid">
                  El precio de TuBoutique es requerido.
                </div>
                <div class="row">
                  <div class="col-lg-12">
                    <label for="">Marcas</label><br>
                    <div class="selectWrapper">
                      <select name="genderSelect" id="genderSelect" class="selectpicker"
                      (change)="pushTag($event.target.value)">
                        <option disabled="disabled" selected="selected">-Seleccionar-</option>
                        <option *ngFor="let tag of tags" [value]="tag.id">
                          {{tag.name}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-lg-12">
                    <label for="">Género</label><br>
                    <div class="selectWrapper">
                      <select name="genderSelect" id="genderSelect" class="selectpicker"
                      (change)="pushGender($event.target.value)">
                        <option disabled="disabled" selected="selected">-Seleccionar-</option>
                        <option *ngFor="let gen of gender" [value]="gen.id">
                          {{gen.name}}
                        </option>
                      </select>
                    </div>
                  </div>
                  <div class="col-lg-5">
                    <label for="">Departamento</label><br>
                    <div class="selectWrapper">
                      <select name="department" id="department"
                      (change)="pushDepart($event.target.value)" class="custom-select">
                      <option disabled="disabled" selected="selected">--Seleccionar--</option>
                      <option *ngFor="let dpt of department" [value]="dpt.id">
                        {{dpt.name}}
                      </option>
                    </select>
                    </div>
                  </div>
                  <div class="col-lg-5">
                    <div class="input-group-desc">
                      <label for="">Peso</label>
                      <input class="input--style-5" type="text" name="weight" #weight="ngModel"
                        [(ngModel)]="product.weight" placeholder="Kg" type="text" required>
                    </div>
                  </div>
                  <div class="input-group-desc col-lg-12">
                    <div class="row">
                      <div class="col-md-3">
                        <label for="">Talla</label>
                        <input class="input--style-5" name="size" #size="ngModel" [(ngModel)]="size.size" type="text"
                          type="text" required>
                      </div>
                      <div class="col-md-3">
                        <label for="">Cantidad</label>
                        <input class="input--style-5" type="number" name="amount" #amount="ngModel"
                          [(ngModel)]="size.amount" required>
                      </div>
                      <div class="col-xs-4"><br>
                        <button type="button" class="btn btn-secondary" (click)="saveSizeAmount(size)"><i
                            class="fas fa-plus"></i></button>
                      </div>
                      <div class="col-xs-2" *ngIf="checkMark">
                        <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                          <circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none" />
                          <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8" />
                        </svg>
                      </div>
                    </div>
                    <div class="alert alert-danger" *ngIf="warningAmount">
                      El campo cantidad debe que ser mayor a 0.
                    </div>
                    <div class="alert alert-danger" *ngIf="warningSize" role="alert">
                      El campo talla es requerido.
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div>
              <h2 style="text-align: center;">Imagen Principal</h2>
              <div class="divPhoto col-md-4">
                <div class="colPhoto">
                  <img class="img-responsive" [src]="fileBlob" alt="">
                </div>
              </div>
              <label class="btnLabel btn btn--green">
                <i class="fas fa-file-upload"></i> Subir imagen
                <input class="inputFile" name="photo" type="file" id="img" accept="image/*" (change)="onUpload($event)">
              </label>
            </div>
            <div class="col-md-5">
              <div class="custom-dropzone" ngx-dropzone [accept]="'image/*'" (change)="onSelect($event)">
                <ngx-dropzone-label>
                  <div>
                    <h3>Agregar Imagenes</h3>
                  </div>
                </ngx-dropzone-label>
                <ngx-dropzone-image-preview ngProjectAs="ngx-dropzone-preview" *ngFor="let f of fileNpm" [file]="f"
                  [removable]="true" (removed)="onRemove(f)">
                </ngx-dropzone-image-preview>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-3 navbar-right">
              <div *ngIf="addProduct.invalid">
                <button type="submit" class="btn btn-success" disabled="true">
                  Guardar
                </button>
                <button type="button" class="btn btn-primary" (click)="gotoPanel()">Volver</button>
              </div>
              <div *ngIf="addProduct.valid">
                <button type="submit" class="btn btn-success">
                  Guardar
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="wrapper wrapper--w1150">
    <div class="card card-5">
      <div class="card-heading">
        <h2 class="title">Lista de producto</h2>
      </div>
      <div class="card-body">
        <div class="search-product">
          <input class="form-control" type="text" name="search" [(ngModel)]="searchProduct" autocomplete="off"
            placeholder=" &#61442; Buscar...">
        </div>
        <pagination-controls class="my-pagination" (pageChange)="p = $event">
        </pagination-controls>
        <div class="table-responsive">
          <table class="table table-striped">
            <thead class="">
              <th></th>
              <th>Producto</th>
              <th>Detalle</th>
              <th>Género</th>
              <th>Depart</th>
              <th>Público</th>
              <th>Mayoreo</th>
              <th>TuBoutique</th>
              <th>Peso</th>
            </thead>
            <tbody>
              <tr
                *ngFor="let product of productView  | filter: searchProduct | paginate: { itemsPerPage: 10, currentPage: p }">
                <td>
                  <img class="img-responsive" [src]="product.photo" alt="">
                </td>
                <td>
                  {{product.name}}
                </td>
                <td>
                  {{product.detail}}
                </td>
                <td>
                  {{product.gender}}
                </td>
                <td>
                  {{product.department}}
                </td>
                <td>
                  {{product.pricePublic | number: '3.'}}
                </td>
                <td>
                  {{product.priceMajor | number: '3.'}}
                </td>
                <td>
                  {{product.priceTuB | number: '3.'}}
                </td>
                <td>
                  {{product.weight}}kg
                </td>
                <td>
                  <button type="button" class="btn btn-primary" (click)="gotoEdit(product.id)"><i
                      class="far fa-edit"></i> Modificar
                  </button>
                  <button type="button" (click)="deleteProductView(product.id)" class="btn btn-danger"><i
                      class="far fa-trash-alt"></i> Eliminar
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
          <pagination-controls class="my-pagination" (pageChange)="p = $event"></pagination-controls>
          <div class="alert alert-success" *ngIf="!statusBool" role="alert">
            No hay productos en inventario!
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
